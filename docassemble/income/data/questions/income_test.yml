---
modules:
  - docassemble.base.util
  - .income
---
objects: 
  - my_income_list: HourlyOrPeriodicFinancialList
---
mandatory: True
code: |
  my_income_list.complete_attribute = 'is_hourly'
---
question: |
  Do you have any income?
yesno: my_income_list.there_are_any
---
question: |
  You said you have ${ len(my_income_list) } sources of income.
  Do you have any more income?
yesno: my_income_list.there_is_another
---
question: |
  What is your income?
fields:
  - Is it an hourly job?: my_income_list[i].is_hourly
    datatype: yesno
  - What type of income is it?: my_income_list[i].kind
    code: |
      income_type_list()
  - Hourly rate: my_income_list[i].hourly_rate
    datatype: currency
    show if: my_income_list[i].is_hourly
  - Average hours worked per period: my_income_list[i].hours_per_period
    datatype: integer
    show if: my_income_list[i].is_hourly
  - Amount earned: my_income_list[i].value 
    datatype: currency
    show if:
      variable: my_income_list[i].is_hourly
      is: False
  - Over what time period: my_income_list[i].period
    datatype: number
    code: |
      period_list()
---
mandatory: True
question: |
  Your annual income is ${ currency(my_income_list.total()) }
  
  Your monthly income is ${ currency(my_income_list.total(period_to_use=12)) }
subquestion: |
  % for job in my_income_list:
  ${ job.kind} earns ${currency(job.amount(period_to_use=12))} per month.
  % endfor
---
#mandatory: True
question: |
  Blah
subquestion: |
  ${ dir(my_income_list) }